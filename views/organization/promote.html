{{> header}}
<div class="container">
  <div class="col-sm-12 col-md-offset-1 col-md-12 main">
    <div class="row">
      {{> sidebar}}
      <div class="col-md-12">
        <h3>Promote Organization</h3>
        <hr>
      </div>
      <form id="promo" class="form-horizontal">
        <div class="col-md-6 form-group">
          <label for="inputEmail3" class="col-sm-4 control-label">Start Date</label>
          <div class="col-sm-8">
            <input type="date" class="form-control" id="start" placeholder="dd/mm/yyyy">
          </div>
        </div>
        <div class="col-md-6 form-group">
          <label for="inputPassword3" class="col-sm-4 control-label">End Date</label>
          <div class="col-sm-8">
            <input type="date" class="form-control" id="end" placeholder="dd/mm/yyyy">
          </div>
        </div>
        <div class="col-md-offset-4 col-md-6">
          <div class="col-md-12 form-group">
            <div class="col-sm-12">
              <button id="submit" class="btn btn-primary btn-block">Send request</button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
{{> scripts}}
<script>
  $("#submit").on("click", function(event) {
    event.preventDefault();
    var date = {};
    date.start = Date.parse($("#start").val());
    date.end = Date.parse($("#end").val());
    $.ajax({
      url: '/promote',
      type: 'POST',
      data: date,
      success: function(data) {
        if (data.success) {
          swal({
              title: "Done!",
              text: "You started a promote!",
              type: "success",
              confirmButtonColor: "#AEDEF4",
              confirmButtonText: "Ok!",
              closeOnConfirm: true
            }
            /*,
                        function() {
                          location.reload();
                        }*/
          );
        } else
          swal("Error!", "Something has gone wrong.", "error");
      },
      error: function(xhr, desc, err) {
        console.log(xhr);
        console.log("Desc: " + desc + "\nErr:" + err);
      }

    })
  })
</script>
{{> footer}}